
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A site for documenting MCW Research Computing systems and services.">
      
      
        <meta name="author" content="MCW RCC">
      
      
        <link rel="canonical" href="https://docs.rcc.mcw.edu/user-guide/jobs/running-jobs/">
      
      
        <link rel="prev" href="../../access/remote-access/">
      
      
        <link rel="next" href="../storage-job/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.12">
    
    
      
        <title>Submitting SLURM Jobs - MCW Research Computing</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.0d440cfe.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
      
      
  
  
    
    
  
  
  <style>:root{--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>');}</style>


    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-50ZTKYWP10"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-50ZTKYWP10",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-50ZTKYWP10",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#running-jobs" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  <a style="color: white; " href="https://docs.rcc.mcw.edu/pubs/">
    Do you rely on Research Computing resources? Please acknowledge that support in your publications. It really helps!
  </a>

          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="MCW Research Computing" class="md-header__button md-logo" aria-label="MCW Research Computing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MCW Research Computing
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Submitting SLURM Jobs
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mcw-rcc/mcw-rcc.github.io/tree/src" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mcw-rcc/docs
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../quickstart/" class="md-tabs__link md-tabs__link--active">
        User Guide
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../storage/rcc-storage/" class="md-tabs__link">
        Data Storage
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../software/modules/" class="md-tabs__link">
        Software
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../secure-computing/reshpc/" class="md-tabs__link">
        ResHPC
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="MCW Research Computing" class="md-nav__button md-logo" aria-label="MCW Research Computing" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3H9m3 2 4 13 3-1-4-13-3 1M5 5v13h3V5H5M3 19v2h18v-2H3Z"/></svg>

    </a>
    MCW Research Computing
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mcw-rcc/mcw-rcc.github.io/tree/src" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mcw-rcc/docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../news/" class="md-nav__link">
        Recent News
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../grants/" class="md-nav__link">
        Grant Boilerplate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../pubs/" class="md-nav__link">
        Publications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounts/" class="md-nav__link">
        Getting an Account
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../etiquette/" class="md-nav__link">
        User Etiquette
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          Connecting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Connecting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../access/login/" class="md-nav__link">
        Logging in
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../access/ondemand/" class="md-nav__link">
        Open OnDemand
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../access/ssh/" class="md-nav__link">
        SSH Connection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../access/remote-access/" class="md-nav__link">
        Remote Access
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
          Running Jobs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_5">
          <span class="md-nav__icon md-icon"></span>
          Running Jobs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Submitting SLURM Jobs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Submitting SLURM Jobs
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-slurm" class="md-nav__link">
    About SLURM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-slurm-commands" class="md-nav__link">
    Common SLURM Commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-job-inputoutput-files" class="md-nav__link">
    Managing Job Input/Output Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slurm-concepts" class="md-nav__link">
    SLURM Concepts
  </a>
  
    <nav class="md-nav" aria-label="SLURM Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nodes-cores-tasks" class="md-nav__link">
    Nodes, Cores &amp; Tasks
  </a>
  
    <nav class="md-nav" aria-label="Nodes, Cores &amp; Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-thread" class="md-nav__link">
    Single-thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-thread" class="md-nav__link">
    Multi-thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-process" class="md-nav__link">
    Multi-process
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mpi" class="md-nav__link">
    MPI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#partitions" class="md-nav__link">
    Partitions
  </a>
  
    <nav class="md-nav" aria-label="Partitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#normal" class="md-nav__link">
    Normal
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bigmem" class="md-nav__link">
    Bigmem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpu" class="md-nav__link">
    GPU
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qos" class="md-nav__link">
    QOS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-scheduling-policies" class="md-nav__link">
    Job Scheduling Policies
  </a>
  
    <nav class="md-nav" aria-label="Job Scheduling Policies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-limits" class="md-nav__link">
    Resource Limits
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fairshare" class="md-nav__link">
    Fairshare
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-a-job-script" class="md-nav__link">
    Writing a Job Script
  </a>
  
    <nav class="md-nav" aria-label="Writing a Job Script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job-requests" class="md-nav__link">
    Job Requests
  </a>
  
    <nav class="md-nav" aria-label="Job Requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job-name" class="md-nav__link">
    Job Name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu-resources" class="md-nav__link">
    CPU Resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory" class="md-nav__link">
    Memory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#account" class="md-nav__link">
    Account
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#partition" class="md-nav__link">
    Partition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-output" class="md-nav__link">
    Job Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notifications" class="md-nav__link">
    Notifications
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-commands" class="md-nav__link">
    Job Commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submit-a-batch-job" class="md-nav__link">
    Submit a Batch Job
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submit-an-interactive-job" class="md-nav__link">
    Submit an Interactive Job
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gpu-jobs" class="md-nav__link">
    GPU Jobs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugdev-jobs" class="md-nav__link">
    Debug/Dev Jobs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#array-jobs" class="md-nav__link">
    Array Jobs
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../storage-job/" class="md-nav__link">
        Staging Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../software-job/" class="md-nav__link">
        Software in a Job
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshoot/" class="md-nav__link">
        Troubleshoot Jobs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../xdmod/" class="md-nav__link">
        Job Metrics
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Data Storage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Data Storage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/rcc-storage/" class="md-nav__link">
        Storage Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/paid-storage/" class="md-nav__link">
        Paid Additional Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/ref-data/" class="md-nav__link">
        Reference Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/mcw-storage/" class="md-nav__link">
        Additional Storage Options
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
      
      
      
        <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
          Access & Sharing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Access & Sharing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/data-access/" class="md-nav__link">
        Mounting Drives
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/data-sharing/" class="md-nav__link">
        Sharing Data
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
      
      
      
        <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
          Manage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Manage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/file-cleanup/" class="md-nav__link">
        File Cleanup & Archiving
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/file-recovery/" class="md-nav__link">
        File Recovery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/file-transfer/" class="md-nav__link">
        File Transfer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../storage/file-permissions/" class="md-nav__link">
        File Permissions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software/modules/" class="md-nav__link">
        Using Modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software/module-request/" class="md-nav__link">
        Requesting Software
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
          Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software/R/" class="md-nav__link">
        R
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software/python/" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software/tensorflow/" class="md-nav__link">
        TensorFlow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software/pytorch/" class="md-nav__link">
        PyTorch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software/matlab/" class="md-nav__link">
        MATLAB Parallel Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software/schrodinger/" class="md-nav__link">
        Schrodinger
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../software/singularity/" class="md-nav__link">
        Singularity
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          ResHPC
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          ResHPC
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../secure-computing/reshpc/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../secure-computing/project-account/" class="md-nav__link">
        Accounts & Projects
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../secure-computing/mfa-login/" class="md-nav__link">
        Logging in
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../secure-computing/project-storage/" class="md-nav__link">
        Storage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../secure-computing/workflow/" class="md-nav__link">
        Run a Job
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../secure-computing/software/" class="md-nav__link">
        Software
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#about-slurm" class="md-nav__link">
    About SLURM
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-slurm-commands" class="md-nav__link">
    Common SLURM Commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#managing-job-inputoutput-files" class="md-nav__link">
    Managing Job Input/Output Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#slurm-concepts" class="md-nav__link">
    SLURM Concepts
  </a>
  
    <nav class="md-nav" aria-label="SLURM Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nodes-cores-tasks" class="md-nav__link">
    Nodes, Cores &amp; Tasks
  </a>
  
    <nav class="md-nav" aria-label="Nodes, Cores &amp; Tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-thread" class="md-nav__link">
    Single-thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-thread" class="md-nav__link">
    Multi-thread
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-process" class="md-nav__link">
    Multi-process
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mpi" class="md-nav__link">
    MPI
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#partitions" class="md-nav__link">
    Partitions
  </a>
  
    <nav class="md-nav" aria-label="Partitions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#normal" class="md-nav__link">
    Normal
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bigmem" class="md-nav__link">
    Bigmem
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpu" class="md-nav__link">
    GPU
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#qos" class="md-nav__link">
    QOS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-scheduling-policies" class="md-nav__link">
    Job Scheduling Policies
  </a>
  
    <nav class="md-nav" aria-label="Job Scheduling Policies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-limits" class="md-nav__link">
    Resource Limits
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fairshare" class="md-nav__link">
    Fairshare
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-a-job-script" class="md-nav__link">
    Writing a Job Script
  </a>
  
    <nav class="md-nav" aria-label="Writing a Job Script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job-requests" class="md-nav__link">
    Job Requests
  </a>
  
    <nav class="md-nav" aria-label="Job Requests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#job-name" class="md-nav__link">
    Job Name
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cpu-resources" class="md-nav__link">
    CPU Resources
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory" class="md-nav__link">
    Memory
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#account" class="md-nav__link">
    Account
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#partition" class="md-nav__link">
    Partition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-output" class="md-nav__link">
    Job Output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#notifications" class="md-nav__link">
    Notifications
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-commands" class="md-nav__link">
    Job Commands
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submit-a-batch-job" class="md-nav__link">
    Submit a Batch Job
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#submit-an-interactive-job" class="md-nav__link">
    Submit an Interactive Job
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gpu-jobs" class="md-nav__link">
    GPU Jobs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debugdev-jobs" class="md-nav__link">
    Debug/Dev Jobs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#array-jobs" class="md-nav__link">
    Array Jobs
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="running-jobs">Running Jobs<a class="headerlink" href="#running-jobs" title="Permanent link">#</a></h1>
<p>We use <strong>SLURM</strong> (Simple Linux Utility for Resource Management) for submitting, scheduling, and monitoring workloads, which we call jobs. Each job consists of resource requests and a set of commands to run. SLURM helps to schedule these jobs to run on the cluster using efficient methods to maximize throughput and minimize waiting. From the moment you submit a job, SLURM will make many decisions about priority of your workload, fair utilization of the cluster, and which resource is best to complete your job.</p>
<div class="admonition tip">
<p class="admonition-title">Clusters are shared resources.</p>
<p>Please be respectful of all other users. Do not start resource-intensive scripts on a login node. Do not request more resources than your job can use. For more info see <a href="../../etiquette/">User Etiquette</a>.</p>
</div>
<p>Need help scheduling your job? Send us an email at <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#104;&#101;&#108;&#112;&#45;&#114;&#99;&#99;&#64;&#109;&#99;&#119;&#46;&#101;&#100;&#117;">&#104;&#101;&#108;&#112;&#45;&#114;&#99;&#99;&#64;&#109;&#99;&#119;&#46;&#101;&#100;&#117;</a>.</p>
<h2 id="about-slurm">About SLURM<a class="headerlink" href="#about-slurm" title="Permanent link">#</a></h2>
<p>As a cluster workload manager, SLURM has three key functions. First, it allocates exclusive and/or non-exclusive access to resources (compute nodes) to users for some duration of time so they can perform work. Second, it provides a framework for starting, executing, and monitoring work (normally a parallel job) on the set of allocated nodes. Finally, it arbitrates contention for resources by managing a queue of pending work.</p>
<h2 id="common-slurm-commands">Common SLURM Commands<a class="headerlink" href="#common-slurm-commands" title="Permanent link">#</a></h2>
<p>These are the most common SLURM commands.</p>
<p>Submit a batch job script:</p>
<div class="highlight"><pre><span></span><code>sbatch<span class="w"> </span>test-job.slurm
</code></pre></div>
<p>List queued and running jobs:</p>
<div class="highlight"><pre><span></span><code>squeue
</code></pre></div>
<p>Show information about a running job:</p>
<div class="highlight"><pre><span></span><code>squeue<span class="w"> </span>-j<span class="w"> </span>jobId<span class="w"> </span><span class="c1"># jobId is the job number</span>
</code></pre></div>
<p>Cancel a queued job or stop a running job:</p>
<div class="highlight"><pre><span></span><code>scancel<span class="w"> </span>jobId<span class="w"> </span><span class="c1"># jobId is the job number</span>
</code></pre></div>
<p>Show history of job:</p>
<div class="highlight"><pre><span></span><code>sacct<span class="w"> </span>-j<span class="w"> </span>jobId<span class="w"> </span><span class="c1"># jobId is the job number</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">RCC provides an additional command <code>slurminfo</code>.</p>
<p>Use this command to see cluster info and a summary of SLURM stats.</p>
<p><!-- markdownlint-disable MD046 -->
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>slurminfo
<span class="w">       </span>QUEUE<span class="w">   </span>FREE<span class="w">  </span>TOTAL<span class="w">   </span>FREE<span class="w">  </span>TOTAL<span class="w">   </span>RESORC<span class="w">    </span>OTHER<span class="w">  </span>MAXJOBTIME<span class="w">    </span>CORES<span class="w">    </span>NODE<span class="w">  </span>GPU<span class="w">      </span>
<span class="w">   </span>PARTITION<span class="w">  </span>CORES<span class="w">  </span>CORES<span class="w">  </span>NODES<span class="w">  </span>NODES<span class="w">  </span>PENDING<span class="w">  </span>PENDING<span class="w">   </span>DAY-HR:MN<span class="w">    </span>/NODE<span class="w">  </span>MEM-GB<span class="w"> </span><span class="o">(</span>COUNT<span class="o">)</span>
<span class="w">      </span>normal<span class="w">   </span><span class="m">2066</span><span class="w">   </span><span class="m">2880</span><span class="w">     </span><span class="m">41</span><span class="w">     </span><span class="m">60</span><span class="w">        </span><span class="m">0</span><span class="w">      </span><span class="m">144</span><span class="w">     </span><span class="m">7</span>-00:00<span class="w">       </span><span class="m">48</span><span class="w">     </span><span class="m">360</span><span class="w"> </span>-<span class="w">         </span>
<span class="w">      </span>bigmem<span class="w">     </span><span class="m">48</span><span class="w">     </span><span class="m">96</span><span class="w">      </span><span class="m">0</span><span class="w">      </span><span class="m">2</span><span class="w">        </span><span class="m">0</span><span class="w">        </span><span class="m">0</span><span class="w">     </span><span class="m">7</span>-00:00<span class="w">       </span><span class="m">48</span><span class="w">    </span><span class="m">1500</span><span class="w"> </span>-<span class="w">         </span>
<span class="w">         </span>gpu<span class="w">    </span><span class="m">223</span><span class="w">    </span><span class="m">384</span><span class="w">      </span><span class="m">1</span><span class="w">      </span><span class="m">8</span><span class="w">        </span><span class="m">0</span><span class="w">       </span><span class="m">12</span><span class="w">     </span><span class="m">7</span>-00:00<span class="w">       </span><span class="m">48</span><span class="w"> </span><span class="m">360</span>-480<span class="w"> </span>gpu:v100:4<span class="o">(</span>S:0-1<span class="o">)(</span><span class="m">6</span><span class="o">)</span>,gpu:a40:4<span class="o">(</span>S:0-3<span class="o">)(</span><span class="m">2</span><span class="o">)</span>
</code></pre></div>
<!-- markdownlint-enable MD046 --></p>
</div>
<h2 id="managing-job-inputoutput-files">Managing Job Input/Output Files<a class="headerlink" href="#managing-job-inputoutput-files" title="Permanent link">#</a></h2>
<p>The new HPC system requires a specific job workflow:</p>
<ol>
<li>Copy job input/supporting files from your <abbr title="Research Group Storage">RGS</abbr> directory within <code>/group/PI_NetID/...</code> to your scratch directory <code>/scratch/u/NetID</code> or <code>/scratch/g/PI_NetID</code></li>
<li>Submit a job from your <code>/scratch/...</code> directory that utilizes the staged job input/supporting files. <strong>You must make sure the job <abbr title="Input Output">I/O</abbr> runs in your scratch directory.</strong> The easiest way is to run the sbatch command in your <code>/scratch/...</code> directory.</li>
<li>When job finishes, copy results from <code>/scratch/...</code> back to <code>/group/PI_NetID/</code>....</li>
<li>If there are further computations, continues utilizing the job input/supporting files</li>
<li>When jobs are finished and staged job input/supporting files are no longer needed, delete the job input/supporting files from <code>/scratch/...</code></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Your jobs will fail if you do not follow this procedure. Please note that files in <code>/scratch/...</code> that are older than 180 days will be deleted.</p>
</div>
<h2 id="slurm-concepts">SLURM Concepts<a class="headerlink" href="#slurm-concepts" title="Permanent link">#</a></h2>
<h3 id="nodes-cores-tasks">Nodes, Cores &amp; Tasks<a class="headerlink" href="#nodes-cores-tasks" title="Permanent link">#</a></h3>
<p>Before we discuss writing jobs scripts, or submitting jobs, it is important to understand how resources are requested and allocated through SLURM on HPC. SLURM uses three <code>#SBATCH</code> directives, <code>--ntasks</code>, <code>--nodes</code>, and <code>--cpus-per-task</code>, which can be used to run . SLURM uses the concept of tasks, which are processes that can use one or more <abbr title="Central Processing Unit">CPU</abbr> cores to run a copy of a program. Below we'll discuss how nodes, cores, and tasks are used by single-thread, multi-thread, multi-process, and <abbr title="Message Passing Interface">MPI</abbr> applications.</p>
<h4 id="single-thread">Single-thread<a class="headerlink" href="#single-thread" title="Permanent link">#</a></h4>
<p>Many applications are only able to use one <abbr title="Central Processing Unit">CPU</abbr> core. For these single-thread programs, one task running on one core will suffice.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --ntasks=1
</code></pre></div>
<p>Most applications do not use more than one <abbr title="Central Processing Unit">CPU</abbr> core. Single-thread jobs that request multiple cores, waste resources. If your application does not mention multi-thread, multi-core, or <abbr title="Message Passing Interface">MPI</abbr>, please do not request more than one <abbr title="Central Processing Unit">CPU</abbr> core. When in doubt, contact RCC for clarification.</p>
<h4 id="multi-thread">Multi-thread<a class="headerlink" href="#multi-thread" title="Permanent link">#</a></h4>
<p>A multi-thread application is able to use multiple cores on a single system by spawning multiple threads from a single process. Each thread uses one <abbr title="Central Processing Unit">CPU</abbr> core, and all share memory. For a multi-thread application, we can use a single task, and specify multiple cpus per task.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --ntasks=1
#SBATCH --cpus-per-task=4
</code></pre></div>
<p>In this case, the job requests one task that can use 4 <abbr title="Central Processing Unit">CPU</abbr> cores. The user's application should then start one process that runs 4 threads.</p>
<p>Since all <abbr title="Central Processing Unit">CPU</abbr> cores are attached to one process, multi-thread applications cannot use more than one system. Multi-thread jobs that request multiple nodes, waste resources. If your application does not say <abbr title="Message Passing Interface">MPI</abbr>, please do not request more than one node. If your application does not mention multi-thread, multi-core, or <abbr title="Message Passing Interface">MPI</abbr>, please do not request more than one <abbr title="Central Processing Unit">CPU</abbr> core.
When in doubt, contact RCC for clarification.</p>
<h4 id="multi-process">Multi-process<a class="headerlink" href="#multi-process" title="Permanent link">#</a></h4>
<p>A multi-process application, often referred to as "embarrassingly parallel", is able to use multiple cores by starting multiple independent processes. Each process uses one <abbr title="Central Processing Unit">CPU</abbr> core. For a multi-process application, we request multiple tasks.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --ntasks=4
</code></pre></div>
<p>In this case, the job requests 4 tasks, which will use 4 <abbr title="Central Processing Unit">CPU</abbr> cores. Each task can run one copy of the user's application on one <abbr title="Central Processing Unit">CPU</abbr> core. If your application does not mention multi-thread, multi-core, or <abbr title="Message Passing Interface">MPI</abbr>, please do not request more than one <abbr title="Central Processing Unit">CPU</abbr> core. When in doubt, contact RCC for clarification.</p>
<h4 id="mpi"><abbr title="Message Passing Interface">MPI</abbr><a class="headerlink" href="#mpi" title="Permanent link">#</a></h4>
<p>A multi-process application that is written to use Message Passing Interface (<abbr title="Message Passing Interface">MPI</abbr>), is able to use multiple cores across multiple nodes. <abbr title="Message Passing Interface">MPI</abbr> uses the SLURM task information to distribute the application processing across multiple cores and nodes. Each <abbr title="Message Passing Interface">MPI</abbr> process is able to communicate with the others using the high-performance, low-latency network. Therefore, an <abbr title="Message Passing Interface">MPI</abbr> application can scale across cores and nodes with little drop in performance. For a <abbr title="Message Passing Interface">MPI</abbr> application, we request multiple nodes and multiple tasks.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --nodes=4
#SBATCH --ntasks-per-node=8
</code></pre></div>
<p>In this case, the job requests 4 nodes, each running 8 <abbr title="Message Passing Interface">MPI</abbr> processes. The total number of <abbr title="Message Passing Interface">MPI</abbr> processes is equal to <code>nodes * tasks-per-node</code>. SLURM will run these <abbr title="Message Passing Interface">MPI</abbr> processes with the fewest nodes possible. In our case above, we request 4 nodes and 8 tasks-per-node, or 32 total <abbr title="Message Passing Interface">MPI</abbr> processes. If we run this job on HPC, SLURM will use 1 node and 32 <abbr title="Central Processing Unit">CPU</abbr> cores, since HPC has 48 cores per node. If we had requested a higher number of tasks-per-node, SLURM would allocate multiple nodes. This is all done transparently by SLURM.</p>
<p>Please note that there are far fewer <abbr title="Message Passing Interface">MPI</abbr> applications than single- or multi-thread. If your application does not specifically mention <abbr title="Message Passing Interface">MPI</abbr> in its documentation, it probably does not support <abbr title="Message Passing Interface">MPI</abbr>. Again, single- or multi-thread jobs that request multiple nodes, waste resources. If your application does not say <abbr title="Message Passing Interface">MPI</abbr>, please do not request more than one node. When in doubt, contact RCC for clarification.</p>
<h3 id="partitions">Partitions<a class="headerlink" href="#partitions" title="Permanent link">#</a></h3>
<p>SLURM partitions are equivalent to Torque queues. Partitions organize nodes in groups by type, and allow for scheduling, priority, fairshare, and more. The new HPC system uses 3 partitions, normal, bigmem, and gpu. The partition configuration is a work in progress as we adjust resource limits.</p>
<div class="admonition tip">
<p class="admonition-title">Default Partition</p>
<p>The <code>--partition</code> flag is not required for jobs.</p>
</div>
<h4 id="normal">Normal<a class="headerlink" href="#normal" title="Permanent link">#</a></h4>
<p>The <strong>normal</strong> partition contains the <abbr title="Central Processing Unit">CPU</abbr>-only nodes, cn01-cn60. This is the default partition, so any job that does not specify a partition will run in normal. Each node in this partition has <strong>48 cores</strong>, <strong>360GB <abbr title="Random Access Memory">RAM</abbr></strong>, and a <strong>480GB SSD</strong> for local scratch. Most jobs should use this partition, especially if you're using an <abbr title="Message Passing Interface">MPI</abbr> application. A job that does not parallelize, should use <strong>1 core</strong>. A job that does not use <abbr title="Message Passing Interface">MPI</abbr>, should use <strong>48 cores or less</strong>. Jobs using <abbr title="Message Passing Interface">MPI</abbr> can use multiple nodes.</p>
<h4 id="bigmem">Bigmem<a class="headerlink" href="#bigmem" title="Permanent link">#</a></h4>
<p>The <strong>bigmem</strong> partition contains the large memory nodes, hm01-hm02. Each node in this partition has <strong>48 cores</strong>, <strong>1.5TB <abbr title="Random Access Memory">RAM</abbr></strong>, and a <strong>480GB SSD</strong> for local scratch. Use the <code>#SBATCH --partition=bigmem</code> directive to have your job run on a large memory server.</p>
<h4 id="gpu"><abbr title="Graphical Processing Unit">GPU</abbr><a class="headerlink" href="#gpu" title="Permanent link">#</a></h4>
<p>The <strong>gpu</strong> partition contains the gpu nodes. Nodes gn01-gn06 each have <strong>48 cores</strong>, <strong>360GB <abbr title="Random Access Memory">RAM</abbr></strong>, <strong>4 V100 GPUs</strong>, and a <strong>480GB SSD</strong> for local scratch. Nodes gn07-gn08 each have <strong>48 cores</strong>, <strong>480GB <abbr title="Random Access Memory">RAM</abbr></strong>, <strong>4 A40 GPUs</strong>, and a <strong>3.84TB NVMe SSD</strong> for local scratch. Use the <code>#SBATCH --partition=gpu</code> and <code>#SBATCH --gres=gpu:1</code> directives to have your job run on a gpu node.</p>
<div class="admonition tip">
<p class="admonition-title"><abbr title="Graphical Processing Unit">GPU</abbr> Type</p>
<p>To use a specific <abbr title="Graphical Processing Unit">GPU</abbr> type, use <code>#SBATCH --gres=gpu:type:1</code>, where <strong><em>type</em></strong> is either <code>v100</code> or <code>a40</code>. Please note that most jobs will not benefit from specifying a <abbr title="Graphical Processing Unit">GPU</abbr> type, and this may delay scheduling of your job.</p>
</div>
<h3 id="qos">QOS<a class="headerlink" href="#qos" title="Permanent link">#</a></h3>
<p>A Quality Of Service (QOS) modifier combines additional job resource limits and settings to existing partitions. The <strong>dev</strong> QOS is meant to allow interactive, development, and/or debugging jobs to be more responsive on the new cluster. This QOS has more restricted limits for these jobs, since dev/debug jobs are not considered production jobs. However, the benefit of <strong>dev</strong> QOS is the higher priority setting, which in many cases will float your job to the top of the queue, potentially allowing it to run quicker. The <strong>dev</strong> QOS can be combined with any partition, so that these jobs can be combined with specialized resources such as high memory or <abbr title="Graphical Processing Unit">GPU</abbr>.</p>
<h2 id="job-scheduling-policies">Job Scheduling Policies<a class="headerlink" href="#job-scheduling-policies" title="Permanent link">#</a></h2>
<p>Job scheduling policies include resource limits on partitions and QOS's, and a fairshare algorithm. The fairshare configuration is currently in development.</p>
<h3 id="resource-limits">Resource Limits<a class="headerlink" href="#resource-limits" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Partition</th>
<th>Max Time (default)</th>
<th>Max Nodes/User</th>
<th>Max Cores/User</th>
<th>Max GPUs/User</th>
<th>Max Mem/Core (default)</th>
<th>Priority</th>
</tr>
</thead>
<tbody>
<tr>
<td>normal</td>
<td>7 days (2 hrs)</td>
<td>30</td>
<td>1440</td>
<td>N/A</td>
<td>7.5GB (7.5GB)</td>
<td>10</td>
</tr>
<tr>
<td>bigmem</td>
<td>7 days (2 hrs)</td>
<td>1</td>
<td>48</td>
<td>N/A</td>
<td>31GB (31GB)</td>
<td>10</td>
</tr>
<tr>
<td>gpu</td>
<td>7 days (2 hrs)</td>
<td>4</td>
<td>192</td>
<td>16</td>
<td>10GB (7.5GB)</td>
<td>10</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>QOS</th>
<th>Max Time</th>
<th>Max Nodes/User</th>
<th>Max Cores/User</th>
<th>Max GPUs/User</th>
<th>Max Mem/Core (default)</th>
<th>Priority</th>
</tr>
</thead>
<tbody>
<tr>
<td>dev</td>
<td>8 hrs</td>
<td>1</td>
<td>8</td>
<td>1</td>
<td>7.5GB (7.5GB)</td>
<td>10000</td>
</tr>
</tbody>
</table>
<h3 id="fairshare">Fairshare<a class="headerlink" href="#fairshare" title="Permanent link">#</a></h3>
<p>Fairshare is a scheduler algorithm that manages job priority, based on a comparison of all cluster utilization, to promote equal use the cluster. Fairshare tracks daily usage and uses data from the previous 7 days to adjust job priority. The effect of fairshare data is reduced each day using a decay factor. In practice, when a user increases their cluster utilization, their job priority is lowered compared to other users.</p>
<p>Fairshare effectively allows infrequent users a fair chance to run their jobs on the cluster among the many jobs of more frequent users.</p>
<h2 id="writing-a-job-script">Writing a Job Script<a class="headerlink" href="#writing-a-job-script" title="Permanent link">#</a></h2>
<p>Job scripts are required to run jobs in the queueing system. A job script is a text file using shell script syntax, denoted by the required first line, <code>#!/bin/bash</code>. It can be broken into two sections; resource requests and executable commands. Each section will be explained using the following example SLURM job script that can be used as a starting template for your jobs.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">test-job.slurm</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code>#!/bin/bash
#SBATCH --job-name=test-job
#SBATCH --ntasks=1
#SBATCH --mem-per-cpu=1gb
#SBATCH --time=00:01:00
#SBATCH --account=PI_NetID
#SBATCH --partition=partition
#SBATCH --output=%x-%j.out
#SBATCH --mail-type=ALL
#SBATCH --mail-user=NetID@mcw.edu

echo &quot;Starting at $(date)&quot;
echo &quot;Job name: ${SLURM_JOB_NAME}, Job ID: ${SLURM_JOB_ID}&quot;
echo &quot;I have ${SLURM_CPUS_ON_NODE} CPUs on compute node $(hostname -s)&quot;
</code></pre></div>
<h3 id="job-requests">Job Requests<a class="headerlink" href="#job-requests" title="Permanent link">#</a></h3>
<p>This section is comprised of <code>#SBATCH</code> directives that tell the scheduler what resources you're requesting. Some of the directives are required, as noted below. The job request section is always required at the top of a job script, but there is no specific order for the <code>#SBATCH</code> directives. While more than one directive can be combined on a single line, RCC does recommend a separate line for each.</p>
<h4 id="job-name">Job Name<a class="headerlink" href="#job-name" title="Permanent link">#</a></h4>
<p>A job name is <strong>required</strong> and is set with the <code>#SBATCH --job-name=</code> option. Your job will appear in the queue with this name and job output files may be based on it. Letters, digits, underscore, and hyphens are allowed.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --job-name=myCoolJobName ### REQUIRED
</code></pre></div>
<h4 id="cpu-resources"><abbr title="Central Processing Unit">CPU</abbr> Resources<a class="headerlink" href="#cpu-resources" title="Permanent link">#</a></h4>
<p>A <abbr title="Central Processing Unit">CPU</abbr> resource request is <strong>required</strong> and tells the queueing system how to allocate processes. <abbr title="Central Processing Unit">CPU</abbr> resources can include <code>--ntasks</code>, <code>--cpus-per-task</code>, <code>--nodes</code>, or <code>--ntasks-per-node</code>.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --ntasks=1
</code></pre></div>
<p>Please see <a href="#nodes-cores--tasks">Nodes, Cores &amp; Tasks</a> for more information.</p>
<h4 id="memory">Memory<a class="headerlink" href="#memory" title="Permanent link">#</a></h4>
<p>A memory request is <strong>required</strong> and tells the queueing system how much memory to allocate to processes. SLURM has default- and maximum-memory-per-core settings. If your job is single-thread, please use the <code>--mem</code> flag. If your job is multi-thread or <abbr title="Message Passing Interface">MPI</abbr>, please use the <code>--mem-per-cpu</code> flag. Please note that SLURM enforces memory per core and total memory. Your job will fail if your application exceeds the memory you requested, or the total available memory.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --mem=1gb
</code></pre></div>
<h4 id="time">Time<a class="headerlink" href="#time" title="Permanent link">#</a></h4>
<p>A time request is <strong>required</strong> and tells SLURM how long your job will run. This is equivalent to Torque walltime. The <code>--time</code> flag sets the max time, in DD-HH:MM:SS, that your job can run. If your job exceeds that time limit, it will fail. SLURM is also configured with default and max time limits.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --time=00:01:00
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Does your job require more than the maximum 7 day time limit?</p>
<p>Email the jobid number and time extension request to <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#104;&#101;&#108;&#112;&#45;&#114;&#99;&#99;&#64;&#109;&#99;&#119;&#46;&#101;&#100;&#117;">&#104;&#101;&#108;&#112;&#45;&#114;&#99;&#99;&#64;&#109;&#99;&#119;&#46;&#101;&#100;&#117;</a></p>
</div>
<h4 id="account">Account<a class="headerlink" href="#account" title="Permanent link">#</a></h4>
<p>An account is <strong>required</strong> for your job to run. The <code>--account</code> option should be set to your <abbr title="Principal Investigator">PI</abbr>'s <abbr title="MCW username">NetID</abbr>, or the <abbr title="MCW username">NetID</abbr> of a collaborator <abbr title="Principal Investigator">PI</abbr>. If you need to adjust your account membership, please contact RCC.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --account=PI_NetID
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">You can easily find your accounts with the <code>myaccts</code> command.</p>
<p><!-- markdownlint-disable MD046 -->
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>myaccts
Account<span class="w">        </span>Partition
pi<span class="w">             </span>bigmem,dev,gpu,normal
</code></pre></div>
<!-- markdownlint-enable MD046 --></p>
</div>
<h4 id="partition">Partition<a class="headerlink" href="#partition" title="Permanent link">#</a></h4>
<p>A partition is not required but can be added with <code>#SBATCH --partition=</code>. The partition flag is only needed if requesting complex resources, such as the large memory or <abbr title="Graphical Processing Unit">GPU</abbr> nodes.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --partition=&lt;partition&gt;
</code></pre></div>
<h4 id="job-output">Job Output<a class="headerlink" href="#job-output" title="Permanent link">#</a></h4>
<p>A job output flag is not required. By default SLURM will send job output to <code>slurm-%j.out</code> in the working directory, where <code>%j</code> is the SLURM jobid. If the <code>--output</code> flag is used, SLURM will output the application's STDOUT to the given filename. In our example script, SLURM output is sent to <code>%x-%j.out</code>, where <code>%x</code> is the job name.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --output=%x-%j.out
</code></pre></div>
<h4 id="notifications">Notifications<a class="headerlink" href="#notifications" title="Permanent link">#</a></h4>
<p>Notifications are <strong>optional</strong> and can be sent from the queueing system to an email address of your choice. Many types are supported, but common options include when a job begins <code>#SBATCH --mail-type=BEGIN</code>, when a job ends <code>#SBATCH --mail-type=END</code>, and when a job fails <code>#SBATCH --mail-type=FAIL</code>. Options may be combined, i.e. <code>#SBATCH --mail-type=BEGIN,END</code>. There is also an option to send all notifications <code>#SBATCH --mail-type=ALL</code> The recipient email is specified with <code>#SBATCH --mail-user=NetID@mcw.edu</code>. RCC recommends using notifications during job debugging. Adding notifications as a default may result in email spam, especially if you're submitting many jobs.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --mail-type=ALL ### OPTIONAL
#SBATCH --mail-user=NetID@mcw.edu ### OPTIONAL
</code></pre></div>
<h3 id="job-commands">Job Commands<a class="headerlink" href="#job-commands" title="Permanent link">#</a></h3>
<p>The job commands section always follows the job request section and begins with the first non #SBATCH line. Executable commands commonly include file <abbr title="Input Output">I/O</abbr>, software commands, and directory cleanup.</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Starting at </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Job name: </span><span class="si">${</span><span class="nv">SLURM_JOB_NAME</span><span class="si">}</span><span class="s2">, Job ID: </span><span class="si">${</span><span class="nv">SLURM_JOB_ID</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;I have </span><span class="si">${</span><span class="nv">SLURM_CPUS_ON_NODE</span><span class="si">}</span><span class="s2"> CPUs on compute node </span><span class="k">$(</span>hostname<span class="w"> </span>-s<span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div>
<p>In the example job script, the job commands include several environment variables that are created by SLURM when your job starts. These can be useful to automate tasks or print helpful information about your job to your output file.</p>
<h2 id="submit-a-batch-job">Submit a Batch Job<a class="headerlink" href="#submit-a-batch-job" title="Permanent link">#</a></h2>
<p>Most jobs that run on HPC are batch jobs. A batch job is submitted with the <code>sbatch</code> command and requires a job script. This is the best method for production job as it allows you to submit many jobs and let SLURM do the work. With a batch job, there is no requirement that you sit and watch the command-line. You can submit the job and come back later.</p>
<div class="highlight"><pre><span></span><code>sbatch<span class="w"> </span>test-job.slurm
</code></pre></div>
<p>A job script is required. If you haven't already, please review <a href="#writing-a-job-script">Writing a Job Script</a>.</p>
<h2 id="submit-an-interactive-job">Submit an Interactive Job<a class="headerlink" href="#submit-an-interactive-job" title="Permanent link">#</a></h2>
<p>Users may need an interactive session for debugging or related tasks. An interactive job is submitted with the <code>srun</code> command. All of the SLURM options that are required in job scripts are required with the <code>srun</code> command. In addition, <code>--qos=dev</code> is added automatically.</p>
<div class="highlight"><pre><span></span><code>srun<span class="w"> </span>--ntasks<span class="o">=</span><span class="m">1</span><span class="w"> </span>--mem-per-cpu<span class="o">=</span>4GB<span class="w"> </span>--time<span class="o">=</span><span class="m">01</span>:00:00<span class="w"> </span>--job-name<span class="o">=</span>interactive<span class="w"> </span>--account<span class="o">=</span>PI_NetID<span class="w"> </span>--pty<span class="w"> </span>bash
</code></pre></div>
<p>To stop your interactive job, use the <code>exit</code> command.</p>
<div class="highlight"><pre><span></span><code><span class="nb">exit</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Open OnDemand</p>
<p>We encourage all users to make use of <a href="https://ondemand.rcc.mcw.edu/">Open OnDemand</a> for interactive sessions.</p>
</div>
<h2 id="gpu-jobs"><abbr title="Graphical Processing Unit">GPU</abbr> Jobs<a class="headerlink" href="#gpu-jobs" title="Permanent link">#</a></h2>
<p>The new HPC system includes 6 compute nodes that each have 4 V100 accelerators. There is no need to login to a separate cluster as in the past. You can add a <abbr title="Graphical Processing Unit">GPU</abbr> to your batch or interactive job submission with the <code>--gres=gpu:&lt;N&gt;</code> command, where <strong><em>N</em></strong> is the number of GPUs.</p>
<p>In a job script add:</p>
<div class="highlight"><pre><span></span><code>#SBATCH --gres=gpu:1
#SBATCH --partition=gpu
</code></pre></div>
<p>Interactive job command:</p>
<div class="highlight"><pre><span></span><code>srun<span class="w"> </span>--ntasks<span class="o">=</span><span class="m">1</span><span class="w"> </span>--mem-per-cpu<span class="o">=</span>4GB<span class="w"> </span>--gres<span class="o">=</span>gpu:1<span class="w"> </span>--time<span class="o">=</span><span class="m">01</span>:00:00<span class="w"> </span>--job-name<span class="o">=</span>interactive<span class="w"> </span>--partition<span class="o">=</span>gpu<span class="w"> </span>--account<span class="o">=</span>PI_NetID<span class="w"> </span>--pty<span class="w"> </span>bash
</code></pre></div>
<h2 id="debugdev-jobs">Debug/Dev Jobs<a class="headerlink" href="#debugdev-jobs" title="Permanent link">#</a></h2>
<p>The new HPC system includes a special <code>dev</code> QOS. Any job using this QOS will have a higher priority than non-QOS jobs. The goal is for a interactive/dev/debug job to start running quicker, to speed up the developer's work. While this QOS will attempt to move your job to the top of the queue, it does not guarantee the job will start immediately. This can be combined with any of the other partition and gres requests.</p>
<p>In a job script add:</p>
<div class="highlight"><pre><span></span><code>#SBATCH --qos=dev
#SBATCH --partition=&lt;partition&gt;
</code></pre></div>
<h2 id="array-jobs">Array Jobs<a class="headerlink" href="#array-jobs" title="Permanent link">#</a></h2>
<p>A job array is used to submit multiple similar jobs. Each element in the array represents an independent subjob.</p>
<p>Job arrays are submitted with the SLURM option <code>--array=x-y</code>. Here we specify an array with index 1-5, or 5 subjobs.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --array=1-5
</code></pre></div>
<p>If the SLURM job number is 1000, then the array subjobs will have ids <code>1000_1</code>, <code>1000_2</code>, ..., <code>1000_5</code>. Each subjob will also have an environment variable <code>SLURM_ARRAY_TASK_ID</code> that is set to its array index value.</p>
<p>When submitting many jobs at once, the job array can limit the number of subjobs running at a time. Here we specify an array with index 1-50, limited to 5 running at a time.</p>
<div class="highlight"><pre><span></span><code>#SBATCH --array=1-50%5
</code></pre></div>
<p>A job array can be deleted with the <code>scancel</code> command.</p>
<div class="highlight"><pre><span></span><code>scancel<span class="w"> </span><span class="m">1000</span>
</code></pre></div>
<p>Alternatively, a single subjob can be deleted.</p>
<div class="highlight"><pre><span></span><code>scancel<span class="w"> </span>1000_3
</code></pre></div>
<p>Example: We want to run the same code on 50 different input files. The input files are conveniently named <code>input-1</code>, <code>input-2</code>, etc. The following script will process all 50 input files, 5 at a time.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">test-array-job.slurm</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --job-name=array_example</span>
<span class="c1">#SBATCH --nodes=1</span>
<span class="c1">#SBATCH --ntasks=5</span>
<span class="c1">#SBATCH --mem-per-cpu=1gb</span>
<span class="c1">#SBATCH --time=00:10:00</span>
<span class="c1">#SBATCH --array=1-50%5</span>
<span class="c1">#SBATCH --output=array_%A-%a.out</span>

<span class="nb">command</span><span class="w"> </span>input-<span class="si">${</span><span class="nv">SLURM_ARRAY_TASK_ID</span><span class="si">}</span>
</code></pre></div>
<!-- markdownlint-disable MD041 -->
<!-- markdownlint-enable MD041 -->


  




                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/mcw-rcc" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.
</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.tracking", "navigation.top", "search.highlight", "search.share", "search.suggest"], "search": "../../../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.4b2c34cd.min.js"></script>
      
    
  </body>
</html>